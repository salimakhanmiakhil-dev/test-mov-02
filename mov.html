<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MyMoviz Scraper</title>
</head>
<body>
  <h1>Movie Search</h1>
  <input id="query" placeholder="Enter movie name">
  <button onclick="search()">Search</button>

  <div id="results" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-top:20px;"></div>

  <script>
    async function search() {
      const q = document.getElementById("query").value;
      const res = await fetch(`/api/search?q=${encodeURIComponent(q)}`);
      const data = await res.json();

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      if (!data.length) {
        resultsDiv.innerHTML = "<p>No results found.</p>";
        return;
      }

      data.forEach(movie => {
        const div = document.createElement("div");
        div.innerHTML = `
          <img src="${movie.img}" alt="${movie.title}" width="150">
          <p><a href="${movie.link}" target="_blank">${movie.title}</a></p>
        `;
        resultsDiv.appendChild(div);
      });
    }
  </script>
</body>
</html>